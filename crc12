//CRC12
#include<stdio.h>
int d[28],g[13],temp[13],n;
void main(){
        int i,a=0,count=0;
        printf("enter the number of bits : ");
        scanf("%d",&n);
        printf("Enter the data : ");
        for(i=0;i<n+12;i++){
                if(i<n){
                        scanf("%d",&d[i]);
                }
                else{
                        d[i]=0;
                }
        }
        for(i=0;i<13;i++){
                if(i==0 || i==1 || i==9 || i==10 || i==11 || i==12){
                        g[i]=1;
                }
                else{
                        g[i]=0;
                }
        }
        printf("The crc 12 generator is : ");
        for(i=0;i<13;i++){
                temp[i]=0;
                printf("%d ",g[i]);
        }
        division();
        count=0;
        printf("\nThe data to transmit  from sender is : ");
        for(i=0;i<n+12;i++){
                if(i>n-1){
                        d[i]=temp[++a];
                }
                printf("%d ",d[i]);
        }
        printf("\nEnter the %d bit reciever data : ",n+12);
        for(i=0;i<n+12;i++){
        	scanf("%d",&d[i]);
		}
        division();
        for(i=0;i<13;i++){
                if(temp[i]==0){
                        count++;
                }
                printf("%d ",temp[i]);
        }
        if(count==13){
                printf("\n\tNO ERROR\n");
        }
        else{
                printf("\n\tERROR\n");
        }
}
void division(){
        int i,j,count=0,z;
        for(i=0;i<13;i++){
                temp[i]=d[i];
        }
        z=12;
        while(count<n){
                if(temp[0]!=0){
                        for(i=0;i<13;i++){
                                temp[i]=temp[i]^g[i];
                        }
                }
                if(count==n-1){
                        break;
                }
                for(i=0;i<13;i++){
                        if(i==12){
                                temp[i]=d[++z];
                        }
                        else{
                                 temp[i]=temp[i+1];
                        }
                }
                count++;
        }
}
